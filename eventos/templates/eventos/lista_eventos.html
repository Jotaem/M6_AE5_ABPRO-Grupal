{% extends 'eventos/base.html' %}

{% block page_title %}Mis Eventos{% endblock %}

{% block content %}
    {% if eventos %}
        <div class="d-flex justify-content-end mb-4">
            <a href="{% url 'crear_evento' %}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Crear Nuevo Evento</a>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">Nombre del Evento</th>
                        <th scope="col">Fecha</th>
                        <th scope="col" class="text-end">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for evento in eventos %}
                    <tr>
                        <td><a href="{% url 'detalle_evento' evento.pk %}">{{ evento.nombre }}</a></td>
                        <td>{{ evento.fecha|date:"d/m/Y" }}</td>
                        <td class="text-end">
                            {% if user == evento.organizador or user.is_staff %}
                                <a href="{% url 'editar_evento' evento.pk %}" class="btn btn-warning btn-sm me-1"><i class="bi bi-pencil-square"></i> Editar</a>
                            {% endif %}
                            {% if user.is_staff %}
                                <a href="{% url 'eliminar_evento' evento.pk %}" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i> Eliminar</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="text-center p-5">
            <i class="bi bi-calendar-x" style="font-size: 4rem; color: #6c757d;"></i>
            <h3 class="mt-3">No Tienes Eventos Programados</h3>
            <p class="lead text-muted">Parece que aún no has creado ningún evento.</p>
            <div class="mt-4">
                <a href="{% url 'crear_evento' %}" class="btn btn-primary btn-lg"><i class="bi bi-plus-circle"></i> Crea tu Primer Evento</a>
            </div>
        </div>
    {% endif %}
{% endblock %}